{% extends 'base.html' %}
{% block title %}Articles - Agri-Naija Centre{% endblock %}

{% block content %}
<section class="articles-section" style="padding: 40px 20px; max-width: 1000px; margin: 0 auto;">
    <h1 class="page-title" style="color: #1e8e3e; margin-bottom: 20px;">Articles</h1>

    <form method="get" class="search-filter-form" style="display:flex; flex-wrap:wrap; gap:10px; margin-bottom:30px;">
        <input type="text" name="search" placeholder="Search articles..." value="{{ search_query or '' }}" style="flex:1; padding:10px; border:1px solid #ccc; border-radius:5px;">
        <select name="category" style="padding:10px; border:1px solid #ccc; border-radius:5px;">
            <option value="all">All Categories</option>
            {% for cat in categories %}
            <option value="{{ cat }}" {% if cat == current_category %}selected{% endif %}>{{ cat }}</option>
            {% endfor %}
        </select>
        <button type="submit" style="background-color:#1e8e3e; color:white; border:none; padding:10px 20px; border-radius:5px; cursor:pointer; transition:background 0.3s;">Search</button>
    </form>

    <div class="article-grid" style="display:grid; grid-template-columns: repeat(auto-fill, minmax(280px, 1fr)); gap:20px;">
        {% for article in articles.items %}
        <div class="article-card" style="border:1px solid #ddd; border-radius:8px; padding:20px; background-color:white; transition: transform 0.2s, box-shadow 0.2s;">
            <h2 style="margin-top:0; font-size:1.2em; color:#1e8e3e;">
                <a href="{{ url_for('article_detail', article_id=article.id) }}" style="text-decoration:none; color:inherit;">{{ article.title }}</a>
            </h2>
            <p style="color:#333;">{{ article.content[:150] }}...</p>
            <span class="category" style="display:inline-block; margin-top:10px; padding:5px 10px; background-color:#e6f2e6; color:#1e8e3e; border-radius:4px; font-size:0.85em;">{{ article.category }}</span>
        </div>
        {% endfor %}
    </div>

    <div class="pagination" style="display:flex; justify-content:center; gap:15px; margin-top:30px;">
        {% if articles.has_prev %}
        <a href="{{ url_for('article_list', page=articles.prev_num, search=search_query, category=current_category) }}" style="padding:8px 12px; border:1px solid #1e8e3e; border-radius:4px; text-decoration:none; color:#1e8e3e; transition: background 0.3s, color 0.3s;">← Prev</a>
        {% endif %}
        {% if articles.has_next %}
        <a href="{{ url_for('article_list', page=articles.next_num, search=search_query, category=current_category) }}" style="padding:8px 12px; border:1px solid #1e8e3e; border-radius:4px; text-decoration:none; color:#1e8e3e; transition: background 0.3s, color 0.3s;">Next →</a>
        {% endif %}
    </div>
</section>

<style>
.article-card:hover {
    transform: translateY(-5px);
    box-shadow: 0 6px 18px rgba(0,0,0,0.1);
}

.pagination a:hover {
    background-color:#1e8e3e;
    color:white;
}
button:hover {
    background-color:#166c2d;
}
</style>
{% endblock %}
