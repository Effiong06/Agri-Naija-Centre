{% extends 'admin/master.html' %}

{% block body %}

<div class="container-fluid" style="margin-top: 20px;">

    <h2 style="color:#2d6a4f;">Admin Dashboard</h2>
    <hr>

    <!-- Summary Cards -->
    <div class="row">

        <div class="col-md-4">
            <div class="card text-white bg-success mb-3">
                <div class="card-header">Total Articles</div>
                <div class="card-body">
                    <h3 class="card-title">{{ total_articles }}</h3>
                </div>
            </div>
        </div>

        <div class="col-md-4">
            <div class="card text-white bg-info mb-3">
                <div class="card-header">Administrators</div>
                <div class="card-body">
                    <h3 class="card-title">{{ total_admins }}</h3>
                </div>
            </div>
        </div>

    </div>

    <!-- Articles per Category -->
    <h4 style="margin-top: 25px;">Articles by Category</h4>
    <ul class="list-group mb-4">
        {% for category, count in category_counts %}
            <li class="list-group-item d-flex justify-content-between align-items-center">
                {{ category }}
                <span class="badge bg-secondary">{{ count }}</span>
            </li>
        {% endfor %}
    </ul>

    <!-- Latest Articles -->
    <h4>Latest Articles</h4>
    <table class="table table-striped">
        <thead>
            <tr>
                <th>Title</th>
                <th>Category</th>
                <th>Date Posted</th>
            </tr>
        </thead>
        <tbody>
            {% for article in latest_articles %}
            <tr>
                <td><a href="{{ url_for('article_detail', article_id=article.id) }}">{{ article.title }}</a></td>
                <td>{{ article.category }}</td>
                <td>{{ article.date_posted.strftime('%Y-%m-%d') }}</td>
            </tr>
            {% endfor %}
        </tbody>
    </table>

    <!-- Quick Buttons -->
    <a href="/admin/article/new/" class="btn btn-success">Create New Article</a>
    <a href="/admin/administrator/" class="btn btn-secondary">Manage Admins</a>

</div>

{% endblock %}
